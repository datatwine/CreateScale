# ---------------------------------------------------------------------------
# Nginx Log Exporter Configuration
# WHAT: Tells the exporter how to parse Nginx access log lines.
# WHY:  Nginx writes logs in a custom format (defined in compose/nginx.conf).
#       This config teaches the exporter how to break each log line into fields
#       (status code, request time, upstream time, etc.) so Prometheus can
#       scrape them as metrics.
# NOTE: The "format" string MUST exactly match the log_format in nginx.conf.
#       It must be on a SINGLE LINE â€” YAML does NOT support Python-style
#       multi-line string concatenation ('...' '...').
# ---------------------------------------------------------------------------
listen:
  port: 4040
  address: 0.0.0.0

namespaces:
  - name: nginx
    format: "$remote_addr - $remote_user [$time_iso8601] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" rt=$request_time urt=$upstream_response_time uaddr=$upstream_addr reqlen=$request_length sent=$bytes_sent"
    source_files:
      - /var/log/nginx/access.log
